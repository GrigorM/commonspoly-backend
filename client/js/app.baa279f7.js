(function(e){function t(t){for(var a,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],o[s]&&p.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function s(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"51c75f75"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=o[e]=[t,a]});t.push(n[2]=a);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=s(e),r=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");s.type=a,s.request=r,n[1](s)}o[e]=void 0}};var c=setTimeout(function(){r({type:"timeout",target:l})},12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/commonspoly-build/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"16cd":function(e,t,n){},"1c38":function(e,t,n){"use strict";var a=n("3d25"),o=n.n(a);o.a},"239c":function(e,t,n){},3727:function(e,t,n){"use strict";var a=n("cc7c"),o=n.n(a);o.a},"3a74":function(e,t,n){},"3d25":function(e,t,n){},4005:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s=n("cebc"),i={name:"app",data:function(){return{started:!1}},created:function(){var e=this;Qe.$on("startGame",function(t){e.$store.dispatch("setGame",t),e.started=!0,e.$router.push({name:"game",params:{gameId:t.gameId}})}),Qe.$on("loadGame",function(t){e.$store.dispatch("loadGameStatus",t),e.$router.push({name:"identify",params:{gameId:t.gameId}})}),Qe.$on("playerUpdate",function(t){e.$store.dispatch("updatePlayer",t)}),Qe.$on("addRound",function(){e.$store.dispatch("incrementRound")}),Qe.$on("revolution",function(t){e.$store.dispatch("storeRevolution",t)}),Qe.$on("refreshGame",function(t){e.$store.dispatch("refreshGame",Object(s["a"])({},t))})}},l=i,c=(n("5c0b"),n("2877")),d=Object(c["a"])(l,o,r,!1,null,null,null),u=d.exports,p=(n("20d6"),n("7f7f"),n("75fc")),h=(n("ac6a"),n("2f62"));a["a"].use(h["a"]);var m=new h["a"].Store({state:{players:[],singlePlayer:null,selectedPlayer:null,round:1,gameId:null,role:"",code:null,revolutions:[]},getters:{players:function(e){return e.players}},mutations:{ADD_PLAYER:function(e,t){e.players.push(t)},LOAD_GAME_STATUS:function(e,t){t.players.forEach(function(t){e.players.push(t)}),e.round=t.round,e.gameId=t.gameId,e.code=t.code,t.revolutions.forEach(function(t){e.revolutions.push(t)})},REFRESH:function(e,t){a["a"].set(e,"players",Object(p["a"])(t.players)),e.singlePlayer=e.players[t.playerIndex]},SET_GAMEID:function(e,t){e.gameId=t.gameId,e.code=t.code,e.role="master"},SET_ROLE:function(e,t){e.singlePlayer=e.players[t],e.role=e.singlePlayer.name},UPDATE_PLAYER:function(e,t){e.players[t.playerIndex].WP=t.playerData.WP,e.players[t.playerIndex].LP=t.playerData.LP,t.playerData.global.forEach(function(n,o){a["a"].set(e.players[t.playerIndex].global,o,n)}),t.playerData.situations.forEach(function(n,o){a["a"].set(e.players[t.playerIndex].situations,o,n)}),t.playerData.goodsUnlocked.forEach(function(n,o){a["a"].set(e.players[t.playerIndex].goodsUnlocked,o,n)}),t.playerData.rewards.forEach(function(n,o){a["a"].set(e.players[t.playerIndex].rewards,o,n)}),e.players[t.playerIndex].h=t.playerData.h,e.players[t.playerIndex].u=t.playerData.u,e.players[t.playerIndex].i=t.playerData.i,e.players[t.playerIndex].e=t.playerData.e},SELECT_PLAYER:function(e,t){console.log("index: ".concat(t)),console.log(e.players[t]),e.selectedPlayer=e.players[t]},DESELECT_PLAYER:function(e){e.selectedPlayer=null},NEXT_ROUND:function(e){e.round++},STORE_REVOLUTION:function(e,t){e.revolutions.push(t)}},actions:{addPlayer:function(e,t){var n=e.commit;n("ADD_PLAYER",t)},loadGameStatus:function(e,t){var n=e.commit;n("LOAD_GAME_STATUS",t)},setGame:function(e,t){var n=e.commit;n("SET_GAMEID",t)},setRole:function(e,t){var n=e.commit,a=e.state,o=function(e){var n=t;return console.log("".concat(n," - ").concat(e.name)),e.name==n};console.log(t),console.log(a.players);var r=a.players.findIndex(o);console.log(r),-1!==r?n("SET_ROLE",r):t==a.code&&(a.role="master")},updatePlayer:function(e,t){var n=e.commit;n("UPDATE_PLAYER",t)},selectCharacter:function(e,t){var n=e.commit,a=e.state;console.log("select ".concat(t));var o=a.players.findIndex(function(e){return e.character==t});n("SELECT_PLAYER",o)},exitEditing:function(e){var t=e.commit;t("DESELECT_PLAYER")},incrementRound:function(e){var t=e.commit;t("NEXT_ROUND")},storeRevolution:function(e,t){var n=e.commit;n("STORE_REVOLUTION",t)},refreshGame:function(e,t){var n=e.commit,a=e.state,o=function(e){var t=a.singlePlayer.name;return e.name==t},r=a.players.findIndex(o);n("REFRESH",Object(s["a"])({},t,{playerIndex:r}))}}}),v=n("5b1f"),f=n.n(v),y=n("5a3e"),g=n.n(y),b=n("8c4f"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},P=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v("Welcome to Commonspoly")]),n("router-link",{attrs:{to:{name:"setup",params:{}}}},[e._v("Start new game")]),n("br"),n("router-link",{attrs:{to:{name:"load",params:{}}}},[e._v("Load existing game")])],1)},I=[],k={name:"HelloWorld",props:{msg:String}},C=k,w=(n("c113"),Object(c["a"])(C,x,I,!1,null,"1c53eae4",null)),O=w.exports,R={name:"home",components:{HelloWorld:O}},E=R,L=Object(c["a"])(E,_,P,!1,null,null,null),$=L.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"setup"},[n("b",[e._v("Add players:")]),n("form",{attrs:{action:"index.html",method:"post"}},[n("label",{attrs:{for:"name"}},[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("label",{attrs:{for:"character"}},[e._v("Character")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.character,expression:"character"}],attrs:{type:"text",id:"character"},domProps:{value:e.character},on:{input:function(t){t.target.composing||(e.character=t.target.value)}}}),n("label",{attrs:{for:"h"}},[e._v("Care / Health")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.h,expression:"h"}],attrs:{type:"number",id:"h"},domProps:{value:e.h},on:{input:function(t){t.target.composing||(e.h=t.target.value)}}}),n("label",{attrs:{for:"u"}},[e._v("Occupy / Urban")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.u,expression:"u"}],attrs:{type:"number",id:"u"},domProps:{value:e.u},on:{input:function(t){t.target.composing||(e.u=t.target.value)}}}),n("label",{attrs:{for:"i"}},[e._v("Share / Ideas")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.i,expression:"i"}],attrs:{type:"number",id:"i"},domProps:{value:e.i},on:{input:function(t){t.target.composing||(e.i=t.target.value)}}}),n("label",{attrs:{for:"e"}},[e._v("Regenarative / Environment")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.e,expression:"e"}],attrs:{type:"number",id:"e"},domProps:{value:e.e},on:{input:function(t){t.target.composing||(e.e=t.target.value)}}}),n("br"),n("button",{attrs:{type:"button",name:"button"},on:{click:e.addPlayer}},[e._v("Add player")])]),n("div",{staticClass:"list-of-players"},e._l(e.players,function(t){return n("div",[e._v("\n      "+e._s(t.name)+" / "+e._s(t.character)+" :\n      "),n("span",{staticClass:"purple"},[e._v(e._s(t.h))]),e._v(" /\n      "),n("span",{staticClass:"red"},[e._v(e._s(t.u))]),e._v(" /\n      "),n("span",{staticClass:"yellow"},[e._v(e._s(t.i))]),e._v(" /\n      "),n("span",{staticClass:"green"},[e._v(e._s(t.e))]),e._v(" /\n    ")])}),0),n("label",{attrs:{for:"code"}},[e._v("Master access code")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",id:"code"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),n("br"),n("button",{attrs:{type:"button",name:"button",disabled:e.players.length<2||""==e.code},on:{click:e.startGame}},[e._v("Start game")])])},U=[],D=n("825c"),S=n.n(D),W={sharedDoc:null,wsUrl:"ws://commonspoly-backend.herokuapp.com/",initialize:function(e,t){var n=this,a=new S.a.Connection(new WebSocket("".concat(this.wsUrl))),o=Math.floor(1e6*Math.random());this.sharedDoc=a.get("commongame","".concat(o)),this.sharedDoc.fetch(function(a){if(a)throw a;null===n.sharedDoc.type?(n.sharedDoc.create({round:1,players:e,code:t,revolutions:[]}),Qe.$emit("startGame",{gameId:o,code:t})):console.log(n.sharedDoc)}),this.sharedDoc.subscribe(),this.sharedDoc.on("op",this.handleOperations)},load:function(e){var t=this;console.log("load game ".concat(e));var n=new S.a.Connection(new WebSocket("".concat(this.wsUrl)));this.sharedDoc=n.get("commongame","".concat(e)),this.sharedDoc.fetch(function(n){if(n)throw n;null===t.sharedDoc.type?(console.log("Epmty? how come"),Qe.$emit("wrongId")):(console.log(t.sharedDoc.data),Qe.$emit("loadGame",{gameId:e,round:t.sharedDoc.data.round,players:t.sharedDoc.data.players,code:t.sharedDoc.data.code,revolutions:t.sharedDoc.data.revolutions}))}),this.sharedDoc.subscribe(),this.sharedDoc.on("op",this.handleOperations)},refresh:function(e){var t=this;console.log("refresh");var n=new S.a.Connection(new WebSocket("".concat(this.wsUrl)));this.sharedDoc=n.get("commongame","".concat(e)),this.sharedDoc.fetch(function(n){if(n)throw n;null===t.sharedDoc.type?(console.log("Epmty? how come"),Qe.$emit("wrongId")):(console.log(t.sharedDoc.data),Qe.$emit("refreshGame",{gameId:e,round:t.sharedDoc.data.round,players:t.sharedDoc.data.players,code:t.sharedDoc.data.code,revolutions:t.sharedDoc.data.revolutions}))})},handleOperations:function(e,t){console.log(e);var n=e[0];"players"==n.p[0]?Qe.$emit("playerUpdate",{playerIndex:n.p[1],playerData:n.li}):"round"==n.p[0]?Qe.$emit("addRound"):"revolutions"==n.p[0]&&Qe.$emit("revolution",n.li)},submitOperation:function(e){this.sharedDoc.submitOp(e)}},j={data:function(){return{name:"",character:"",h:0,u:0,i:0,e:0,code:""}},computed:Object(s["a"])({},Object(h["c"])(["players"])),methods:{addPlayer:function(){this.name&&this.character&&this.h&&this.u&&this.i&&this.e&&(this.$store.dispatch("addPlayer",{name:this.name,character:this.character,h:this.h,u:this.u,i:this.i,e:this.e,WP:5,LP:5,global:[],situations:[],goodsUnlocked:[],rewards:[]}),this.name="",this.character="",this.h=0,this.u=0,this.i=0,this.e=0)},startGame:function(){W.initialize(this.players,this.code)}}},T=j,A=(n("ca1d"),Object(c["a"])(T,G,U,!1,null,"1c91b608",null)),N=A.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"simple-container"},[n("label",{attrs:{for:"gameId"}},[e._v("Enter game id")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.gameId,expression:"gameId"}],attrs:{type:"text",name:"",id:"gameId"},domProps:{value:e.gameId},on:{input:function(t){t.target.composing||(e.gameId=t.target.value)}}}),e.errorMessage?n("p",{staticClass:"error"},[e._v(e._s(e.errorMessage))]):e._e(),n("br"),n("button",{staticClass:"standard-btn",attrs:{type:"button",name:"button"},on:{click:e.loadGame}},[e._v("Load")])])},M=[],Y={data:function(){return{gameId:null,errorMessage:null}},methods:{loadGame:function(){this.gameId&&W.load(this.gameId)}},mounted:function(){var e=this;Qe.$on("wrongId",function(){e.errorMessage="Wrong game id"})}},H=Y,q=(n("abd7"),Object(c["a"])(H,F,M,!1,null,"2da30173",null)),z=q.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"container"}},["master"===e.role?n("div",{},[n("h3",[e._v("Game: "+e._s(e.gameId))]),n("p",[e._v("Total LP: "+e._s(e.totalLP))]),n("div",{staticClass:"table",attrs:{id:"gameTable"}},[n("div",{staticClass:"header"},e._l(e.players,function(t,a){return n("div",{key:a,staticClass:"header-cell"},[e._v("\n          "+e._s(t.character)+" / "+e._s(t.name)+" "),n("br"),e._v("\n          WP: "+e._s(t.WP)+" "),n("br"),e._v("\n          LP: "+e._s(t.LP)+" "),n("br"),n("Unlocked",{attrs:{playerIndex:a}}),e._l(e.isRevolutionary(t.name),function(a){return e.isRevolutionary(t.name)>0?n("span",{staticClass:"star"}):e._e()})],2)}),0),n("div",{staticClass:"rounds"},e._l(e.round,function(t){return n("div",{key:100+t,staticClass:"round",class:e.collapsed(t)},[n("div",{staticClass:"full-row round-number"},[n("span",{on:{click:function(n){return e.viewRound(t)}}},[e._v("Round "+e._s(t))])]),e._l(e.players,function(a,o){return n("div",{key:600+o,staticClass:"edit-player-box"},[n("button",{attrs:{type:"button",name:"button"},on:{click:function(n){return e.updatePlayer(a.character,t,o)}}},[e._v("Edit")])])}),e.hasRevolution(t)||t!=e.round?e._e():n("div",{staticClass:"full-row revolution"},[e.revolution?e._e():n("button",{attrs:{type:"button",name:"button",disabled:e.totalLP<10*e.players.length},on:{click:e.startUprising}},[e._v("\n              Start collective uprising\n            ")]),e.revolution?n("div",{},[n("button",{attrs:{type:"button",name:"button",disabled:e.revolutionPoints<10*e.players.length||e.revolutionaries.length<2},on:{click:e.commonise}},[e._v("\n                Commonise!\n              ")]),n("span",[e._v("Total points: "+e._s(e.revolutionPoints))])]):e._e()]),e._l(e.players,function(a,o){return e.revolution&&!e.hasRevolution(t)?n("div",{key:700+o,staticClass:"revolution"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.revolutionaries,expression:"revolutionaries"}],attrs:{type:"checkbox",name:"revolutionaries",disabled:e.revolutionaries.length>=2},domProps:{value:a.name,checked:Array.isArray(e.revolutionaries)?e._i(e.revolutionaries,a.name)>-1:e.revolutionaries},on:{change:function(t){var n=e.revolutionaries,o=t.target,r=!!o.checked;if(Array.isArray(n)){var s=a.name,i=e._i(n,s);o.checked?i<0&&(e.revolutionaries=n.concat([s])):i>-1&&(e.revolutionaries=n.slice(0,i).concat(n.slice(i+1)))}else e.revolutionaries=r}}}),n("br"),n("span",[e._v("Contribute LPs")]),n("button",{attrs:{type:"button",name:"button"},on:{click:function(t){return e.revolutionLPs("sub",o)}}},[e._v("-")]),n("button",{attrs:{type:"button",name:"button"},on:{click:function(t){return e.revolutionLPs("add",o)}}},[e._v("+")]),e._v("\n            Contribution: "+e._s(e.lpsForRevolution[o])+"\n          ")]):e._e()}),e._l(e.players,function(a,o){return e.hasRevolution(t)?n("div",{staticClass:"revolution-data"},[-1!==e.whichRevolution(t).revolutionaries.indexOf(a.name)?n("span",{staticClass:"star"}):n("span",{staticClass:"nostar"}),e._v("\n            Contribution: "+e._s(e.whichRevolution(t).lps[o])+" LPs\n          ")]):e._e()})],2)}),0),n("button",{staticClass:"next-round",attrs:{type:"button",name:"button"},on:{click:function(t){return e.addRound()}}},[e._v("Next round")])])]):e._e(),n("SelectedPlayer",{directives:[{name:"show",rawName:"v-show",value:e.selectedPlayer,expression:"selectedPlayer"}],attrs:{editPlayer:e.selectedPlayer,editPlayerIndex:e.selectedPlayerIndex,editRound:e.selectedRound}})],1)},B=[],J=n("5176"),X=n.n(J),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unlock"},[n("h3",{staticClass:"category-title"},[e._v("Unlocks")]),e.hasUnlocked1?n("div",{staticClass:"capitalize"},[n("div",{staticClass:"unlockedGood",class:e.unlockedWhat})]):n("div",{},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.typeOfGood,expression:"typeOfGood"}],attrs:{type:"radio",name:e.name,value:"health",disabled:e.hasUnlocked1,id:"health-good",hidden:""},domProps:{checked:"health"==e.unlockedWhat,checked:e._q(e.typeOfGood,"health")},on:{change:function(t){e.typeOfGood="health"}}}),e._m(0)]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.typeOfGood,expression:"typeOfGood"}],attrs:{type:"radio",name:e.name,value:"urban",disabled:e.hasUnlocked1,id:"urban-good",hidden:""},domProps:{checked:"urban"==e.unlockedWhat,checked:e._q(e.typeOfGood,"urban")},on:{change:function(t){e.typeOfGood="urban"}}}),e._m(1)]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.typeOfGood,expression:"typeOfGood"}],attrs:{type:"radio",name:e.name,value:"intangible",disabled:e.hasUnlocked1,id:"intangible-good",hidden:""},domProps:{checked:"intangible"==e.unlockedWhat,checked:e._q(e.typeOfGood,"intangible")},on:{change:function(t){e.typeOfGood="intangible"}}}),e._m(2)]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.typeOfGood,expression:"typeOfGood"}],attrs:{type:"radio",name:e.name,value:"environmental",disabled:e.hasUnlocked1,id:"environmental-good",hidden:""},domProps:{checked:"environmental"==e.unlockedWhat,checked:e._q(e.typeOfGood,"environmental")},on:{change:function(t){e.typeOfGood="environmental"}}}),e._m(3)]),n("br"),n("button",{staticClass:"standard-btn",attrs:{type:"button",name:"button",disabled:e.hasUnlocked1},on:{click:e.unlock}},[e._v("\n      Unlock!\n    ")])])])},Q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"health-good"}},[n("span",{staticClass:"custom-radio health-btn"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"urban-good"}},[n("span",{staticClass:"custom-radio urban-btn"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"intangible-good"}},[n("span",{staticClass:"custom-radio intangible-btn"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"environmental-good"}},[n("span",{staticClass:"custom-radio environmental-btn"})])}],Z=n("e814"),ee=n.n(Z),te={props:["playerIndex","name","roundIndex"],data:function(){return{typeOfGood:null,hasUnlocked:!1}},computed:Object(s["a"])({},Object(h["c"])(["players","round","gameId","role"]),{hasUnlocked1:function(){return this.hasUnlocked||void 0!==this.players[this.playerIndex].goodsUnlocked[this.roundIndex-1]},unlockedWhat:function(){return this.players[this.playerIndex].goodsUnlocked[this.roundIndex-1]}}),methods:{unlock:function(){var e=this,t={};if(X()(t,this.players[this.playerIndex]),ee()(t[this.typeOfGood[0]])+t.WP>=10){t.goodsUnlocked[this.roundIndex-1]=this.typeOfGood;var n=t.goodsUnlocked.reduce(function(t,n){return n==e.typeOfGood?t+1:t},0);console.log(n),3!=n&&5!=n||t[this.typeOfGood[0]]++,t.WP=t.WP-(10-t[this.typeOfGood[0]]),t.LP++;var a=[{p:["players",this.playerIndex],ld:this.players[this.playerIndex],li:t}];W.submitOperation(a),this.hasUnlocked=!0}else console.log("Impossibru")}}},ne=te,ae=(n("1c38"),Object(c["a"])(ne,K,Q,!1,null,"eafd116a",null)),oe=ae.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"point-tracker"},["master"===e.role?n("div",{staticClass:"score-modifier"},[n("div",{staticClass:"score-modifier__b1"},[n("h3",{staticClass:"category-title"},[e._v(e._s(e.context))])]),n("div",{staticClass:"score-modifier__b2"},[n("div",{staticClass:"score-modifier__b2-part"},[n("button",{staticClass:"wp-modifier minus",attrs:{type:"button",name:"button"},on:{click:function(t){return e.subtractWP(e.playerIndex,e.context)}}},[e._v("-")]),n("div",{staticClass:"wp-modified"},[e._v("WP: "+e._s(e.displayWPChanges))]),n("button",{staticClass:"wp-modifier plus",attrs:{type:"button",name:"button"},on:{click:function(t){return e.addWP(e.playerIndex,e.context)}}},[e._v("+")])]),e._v("\n       \n      "),n("div",{staticClass:"score-modifier__b2-part"},[n("button",{staticClass:"lp-modifier minus",attrs:{type:"button",name:"button"},on:{click:function(t){return e.subtractLP(e.playerIndex,e.context)}}},[e._v("-")]),n("div",{staticClass:"lp-modified"},[e._v("LP: "+e._s(e.displayLPChanges))]),n("button",{staticClass:"lp-modifier plus",attrs:{type:"button",name:"button"},on:{click:function(t){return e.addLP(e.playerIndex,e.context)}}},[e._v("+")])])])]):e._e()])},se=[],ie={props:["roundIndex","player","context","playerIndex"],computed:Object(s["a"])({},Object(h["c"])(["role","players"]),{displayPointChanges:function(){var e="";return this.player[this.context][this.roundIndex-1]&&void 0!==this.player[this.context][this.roundIndex-1].wp?e+="WP: ".concat(this.player[this.context][this.roundIndex-1].wp):e+="WP: 0",e+=" / ",this.player[this.context][this.roundIndex-1]&&void 0!==this.player[this.context][this.roundIndex-1].lp?e+="LP: ".concat(this.player[this.context][this.roundIndex-1].lp):e+="LP: 0",e},displayWPChanges:function(){var e="";return this.player[this.context][this.roundIndex-1]&&void 0!==this.player[this.context][this.roundIndex-1].wp?e+="".concat(this.player[this.context][this.roundIndex-1].wp):e+="0",e},displayLPChanges:function(){var e="";return this.player[this.context][this.roundIndex-1]&&void 0!==this.player[this.context][this.roundIndex-1].lp?e+="".concat(this.player[this.context][this.roundIndex-1].lp):e+="0",e}}),data:function(){return{}},methods:{subtractWP:function(e,t){var n={};X()(n,this.players[e]),n.WP>0&&n.WP--,n[t][this.roundIndex-1]&&void 0!==n[t][this.roundIndex-1].wp?n[t][this.roundIndex-1].wp--:(n[t][this.roundIndex-1]={wp:0,lp:0},n[t][this.roundIndex-1].wp--);var a=[{p:["players",e],ld:this.players[e],li:n}];W.submitOperation(a)},addWP:function(e,t){var n={};X()(n,this.players[e]),n.WP++,n[t][this.roundIndex-1]&&void 0!==n[t][this.roundIndex-1].wp?n[t][this.roundIndex-1].wp++:(n[t][this.roundIndex-1]={wp:0,lp:0},n[t][this.roundIndex-1].wp++);var a=[{p:["players",e],ld:this.players[e],li:n}];W.submitOperation(a)},subtractLP:function(e,t){var n={};X()(n,this.players[e]),n.LP>0&&n.LP--,n[t][this.roundIndex-1]&&void 0!==n[t][this.roundIndex-1].lp?n[t][this.roundIndex-1].lp--:(n[t][this.roundIndex-1]={wp:0,lp:0},n[t][this.roundIndex-1].lp--);var a=[{p:["players",e],ld:this.players[e],li:n}];W.submitOperation(a)},addLP:function(e,t){var n={};X()(n,this.players[e]),n.LP++,n[t][this.roundIndex-1]&&void 0!==n[t][this.roundIndex-1].lp?n[t][this.roundIndex-1].lp++:(n[t][this.roundIndex-1]={wp:0,lp:0},n[t][this.roundIndex-1].lp++);var a=[{p:["players",e],ld:this.players[e],li:n}];W.submitOperation(a)}}},le=ie,ce=(n("58e1"),Object(c["a"])(le,re,se,!1,null,"289fe408",null)),de=ce.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-backdrop"},[e.editPlayer?n("div",{staticClass:"modal"},[n("header",{staticClass:"modal-header"},[e._t("header",[n("h1",[e._v(e._s(e.editPlayer.name)+" / "+e._s(e.editPlayer.character))]),n("Coins",{attrs:{wp:e.editPlayer.WP,lp:e.editPlayer.LP}}),n("Skills",{attrs:{health:e.editPlayer.h,urban:e.editPlayer.u,intangible:e.editPlayer.i,environmental:e.editPlayer.e}}),n("Unlocked",{attrs:{playerIndex:e.editPlayerIndex}}),n("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:e.exitEditing}},[e._v("\n            x\n          ")])])],2),n("section",{staticClass:"modal-body"},[e._t("body",[n("h2",[e._v("Round: "+e._s(e.editRound))]),n("PointsTracker",{attrs:{roundIndex:e.editRound,player:e.editPlayer,playerIndex:e.editPlayerIndex,context:"global"}}),n("PointsTracker",{attrs:{roundIndex:e.editRound,player:e.editPlayer,playerIndex:e.editPlayerIndex,context:"situations"}}),n("PointsTracker",{attrs:{roundIndex:e.editRound,player:e.editPlayer,playerIndex:e.editPlayerIndex,context:"rewards"}}),n("UnlockGoods",{attrs:{playerIndex:e.editPlayerIndex,name:"unlock"+e.editRound,roundIndex:e.editRound}})])],2),n("footer",{staticClass:"modal-footer"},[e._t("footer",[n("button",{staticClass:"btn-green",attrs:{type:"button"},on:{click:e.exitEditing}},[e._v("\n              Close\n            ")])])],2)]):e._e()])},pe=[],he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"coins wp"},[e._v("\n    "+e._s(e.wp)+"\n  ")]),n("div",{staticClass:"coins lp"},[e._v("\n    "+e._s(e.lp)+"\n  ")])])},me=[],ve={name:"Coins",props:["wp","lp"]},fe=ve,ye=(n("3727"),Object(c["a"])(fe,he,me,!1,null,"1d74a167",null)),ge=ye.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"skills"},[n("span",{staticClass:"powers health"},[e._v(e._s(e.health))]),n("span",{staticClass:"powers urban"},[e._v(e._s(e.urban))]),n("span",{staticClass:"powers intangible"},[e._v(e._s(e.intangible))]),n("span",{staticClass:"powers environmental"},[e._v(e._s(e.environmental))])])},_e=[],Pe={name:"Skills",props:["health","urban","intangible","environmental"]},xe=Pe,Ie=(n("d2ea"),Object(c["a"])(xe,be,_e,!1,null,"f04fff82",null)),ke=Ie.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unlocked"},[n("span",{staticClass:"goods-unlocked health"},[e._v(e._s(e.totalForGood(e.playerIndex,"health"))+" ")]),e._v(" /\n  "),n("span",{staticClass:"goods-unlocked urban"},[e._v(e._s(e.totalForGood(e.playerIndex,"urban"))+" ")]),e._v(" /\n  "),n("span",{staticClass:"goods-unlocked intangible"},[e._v(e._s(e.totalForGood(e.playerIndex,"intangible"))+" ")]),e._v(" /\n  "),n("span",{staticClass:"goods-unlocked environmental"},[e._v(e._s(e.totalForGood(e.playerIndex,"environmental"))+" ")]),n("br")])},we=[],Oe={name:"Unlocked",props:["playerIndex"],methods:{totalForGood:function(e,t){if(e>-1)return this.$store.state.players[e].goodsUnlocked.reduce(function(e,n){return n==t?e+1:e},0);console.log("error "+e)}}},Re=Oe,Ee=(n("d2f4"),Object(c["a"])(Re,Ce,we,!1,null,"5dd5fafa",null)),Le=Ee.exports,$e={components:{Coins:ge,Skills:ke,Unlocked:Le,UnlockGoods:oe,PointsTracker:de},props:["editPlayer","editRound","editPlayerIndex"],methods:{exitEditing:function(){this.$store.dispatch("exitEditing")},totalForGood:function(e,t){if(e>-1)return this.editPlayer.goodsUnlocked.reduce(function(e,n){return n==t?e+1:e},0)}}},Ge=$e,Ue=(n("6675"),Object(c["a"])(Ge,ue,pe,!1,null,"05e45366",null)),De=Ue.exports,Se={components:{UnlockGoods:oe,PointsTracker:de,SelectedPlayer:De,Unlocked:Le},data:function(){return{activeRound:null,selectedRound:null,selectedPlayerIndex:null,id:"",revolution:!1,revolutionaries:[],lpsForRevolution:[]}},computed:Object(s["a"])({},Object(h["c"])(["round","gameId","role","revolutions","selectedPlayer"]),Object(h["b"])(["players"]),{totalLP:function(){return this.players.reduce(function(e,t){return e+t.LP},0)},revolutionPoints:function(){return this.lpsForRevolution.reduce(function(e,t){return e+t},0)}}),methods:{addRound:function(){this.activeRound=null;var e=[{p:["round"],na:1}];W.submitOperation(e)},collapsed:function(e){return e<this.round&&this.activeRound!==e?"collapsed":e===this.round&&null!==this.activeRound&&this.activeRound!==e?"collapsed":"active"},updatePlayer:function(e,t,n){this.selectedRound=t,this.selectedPlayerIndex=n,this.$store.dispatch("selectCharacter",e)},totalForGood:function(e,t){var n=this;if(e>-1)return this.players[e].goodsUnlocked.reduce(function(e,n){return n==t?e+1:e},0);var a=this.players.findIndex(function(e){return e.name===n.role});return this.players[a].goodsUnlocked.reduce(function(e,n){return n==t?e+1:e},0)},viewRound:function(e){this.activeRound=e},startUprising:function(){this.revolution=!0;for(var e=0;e<this.players.length;e++)this.$set(this.lpsForRevolution,e,0)},revolutionLPs:function(e,t){var n={};if("add"==e){if(this.players[t].LP>0){this.$set(this.lpsForRevolution,t,this.lpsForRevolution[t]+1),X()(n,this.players[t]),n.LP--;var a=[{p:["players",t],ld:this.players[t],li:n}];W.submitOperation(a)}}else if("sub"==e&&this.lpsForRevolution[t]>0){this.$set(this.lpsForRevolution,t,this.lpsForRevolution[t]-1),X()(n,this.players[t]),n.LP++;var o=[{p:["players",t],ld:this.players[t],li:n}];W.submitOperation(o)}},commonise:function(){var e={};e.revolutionaries=this.revolutionaries,e.lps=this.lpsForRevolution,e.round=this.round,this.revolutionaries.splice(0,-1);var t=[{p:["revolutions",this.revolutions.length],li:e}];W.submitOperation(t),this.revolution=!1},hasRevolution:function(e){return-1!==this.revolutions.findIndex(function(t){return t.round==e})},whichRevolution:function(e){return this.revolutions.filter(function(t){return t.round==e})[0]},isRevolutionary:function(e){var t=[];return this.revolutions.forEach(function(n){-1!==n.revolutionaries.indexOf(e)&&t.push(n.round)}),t.length}},mounted:function(){var e=this;0===this.players.length&&W.load(this.$route.params.gameId);var t=document.getElementById("gameTable");t&&(t.style.setProperty("--number-of-players",this.players.length),setTimeout(function(){var t=document.getElementById("gameTable");t.style.setProperty("--number-of-players",e.players.length)},1e3))}},We=Se,je=(n("ddfd"),Object(c["a"])(We,V,B,!1,null,"579f22a8",null)),Te=je.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"simple-container"},[e._v("\n  Who are you?\n  "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"id"}],attrs:{type:"text"},domProps:{value:e.id},on:{input:function(t){t.target.composing||(e.id=t.target.value)}}}),e.message?n("span",[e._v(e._s(e.message))]):e._e(),n("br"),n("button",{staticClass:"standard-btn",attrs:{type:"button",name:"button"},on:{click:function(t){return e.identify()}}},[e._v("That's me!")])])},Ne=[],Fe={data:function(){return{id:"",message:null}},methods:{identify:function(){var e=this;this.$store.dispatch("setRole",this.id).then(function(){"master"==e.$store.state.role?e.$router.push({name:"game",params:{gameId:e.$store.state.gameId}}):""==e.$store.state.role?e.message="Player does not exist":e.$router.push({name:"single",params:{gameId:e.$store.state.gameId}})})}}},Me=Fe,Ye=Object(c["a"])(Me,Ae,Ne,!1,null,"7794b5bd",null),He=Ye.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.singlePlayer?n("section",{staticClass:"single-player-view"},[n("button",{staticClass:"refresh-btn",attrs:{type:"button",name:"button"},on:{click:function(t){return e.refreshData()}}},[e._v("↻")]),n("h1",[e._v(e._s(e.singlePlayer.name)+" / "+e._s(e.singlePlayer.character))]),n("Coins",{attrs:{wp:e.singlePlayer.WP,lp:e.singlePlayer.LP}}),n("Skills",{attrs:{health:e.singlePlayer.h,urban:e.singlePlayer.u,intangible:e.singlePlayer.i,environmental:e.singlePlayer.e}}),n("Unlocked",{attrs:{playerIndex:e.playerIndex}}),n("div",{staticClass:"group-lp"},[e._v("\n    Group LPs: "+e._s(e.totalLP)+"\n  ")]),e._l(e.round,function(t){return n("div",{key:t,staticClass:"round",class:e.collapsed(t)},[n("div",{staticClass:"full-row round-number"},[n("span",{on:{click:function(n){return e.viewRound(t)}}},[e._v("Round "+e._s(t))])]),n("div",{staticClass:"full-row global"},[n("h3",{staticStyle:{display:"inline-block"}},[e._v("Global effect:")]),e._v("\n      "+e._s(e.displayPointChanges("global",t))+"\n    ")]),n("div",{staticClass:"full-row situation"},[n("h3",{staticStyle:{display:"inline-block"}},[e._v("Situation effect:")]),e._v("\n      "+e._s(e.displayPointChanges("situations",t))+"\n    ")]),n("div",{staticClass:"full-row"},[n("h3",{staticStyle:{display:"inline-block"}},[e._v("Unlocked:")]),e._v("\n      "+e._s(e.displayUnlocks(t))+"\n    ")]),n("div",{staticClass:"full-row rewards"},[n("h3",{staticStyle:{display:"inline-block"}},[e._v("Rewards:")]),e._v("\n      "+e._s(e.displayPointChanges("rewards",t))+"\n    ")])])})],2):e._e()},ze=[],Ve={components:{Coins:ge,Skills:ke,Unlocked:Le},data:function(){return{activeRound:null}},computed:Object(s["a"])({},Object(h["c"])(["singlePlayer","round","players","gameId"]),{playerIndex:function(){return this.players.indexOf(this.singlePlayer)},totalLP:function(){return this.players.reduce(function(e,t){return e+t.LP},0)}}),methods:{collapsed:function(e){return e<this.round&&this.activeRound!==e?"collapsed":e===this.round&&null!==this.activeRound&&this.activeRound!==e?"collapsed":"active"},viewRound:function(e){this.activeRound=e},displayPointChanges:function(e,t){var n="";return this.singlePlayer[e][t-1]&&void 0!==this.singlePlayer[e][t-1].wp?n+="WP: ".concat(this.singlePlayer[e][t-1].wp):n+="WP: 0",n+=" / ",this.singlePlayer[e][t-1]&&void 0!==this.singlePlayer[e][t-1].lp?n+="LP: ".concat(this.singlePlayer[e][t-1].lp):n+="LP: 0",n},displayUnlocks:function(e){return this.singlePlayer.goodsUnlocked[e-1]?this.singlePlayer.goodsUnlocked[e-1]:"nothing"},filterGoods:function(e){return this.singlePlayer.goodsUnlocked.filter(function(t){return t==e}).length},refreshData:function(){W.refresh(this.gameId)}},mounted:function(){this.singlePlayer?console.log(this.singlePlayer):this.$router.push({name:"game",params:{gameId:this.$route.params.gameId}})}},Be=Ve,Je=(n("de8c"),Object(c["a"])(Be,qe,ze,!1,null,"1ba56319",null)),Xe=Je.exports;a["a"].use(b["a"]);var Ke=new b["a"]({mode:"history",base:"/commonspoly-build/",routes:[{path:"/",name:"home",component:$},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/new",name:"setup",component:N},{path:"/load",name:"load",component:z},{path:"/game/:gameId/identify",name:"identify",component:He},{path:"/game/:gameId",name:"game",component:Te},{path:"/game/:gameId/single",name:"single",component:Xe}]});n.d(t,"bus",function(){return Qe}),a["a"].config.productionTip=!1,a["a"].use(f.a),a["a"].use(g.a);var Qe=new a["a"];new a["a"]({router:Ke,store:m,render:function(e){return e(u)}}).$mount("#app")},5839:function(e,t,n){},"58e1":function(e,t,n){"use strict";var a=n("4005"),o=n.n(a);o.a},"5a3e":function(e,t,n){},"5b1f":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var a=n("5e27"),o=n.n(a);o.a},"5e27":function(e,t,n){},6675:function(e,t,n){"use strict";var a=n("3a74"),o=n.n(a);o.a},a8ab:function(e,t,n){},abd7:function(e,t,n){"use strict";var a=n("a8ab"),o=n.n(a);o.a},c113:function(e,t,n){"use strict";var a=n("fef6"),o=n.n(a);o.a},ca1d:function(e,t,n){"use strict";var a=n("f907"),o=n.n(a);o.a},cc7c:function(e,t,n){},d2ea:function(e,t,n){"use strict";var a=n("5839"),o=n.n(a);o.a},d2f4:function(e,t,n){"use strict";var a=n("ecc3"),o=n.n(a);o.a},ddfd:function(e,t,n){"use strict";var a=n("16cd"),o=n.n(a);o.a},de8c:function(e,t,n){"use strict";var a=n("239c"),o=n.n(a);o.a},ecc3:function(e,t,n){},f907:function(e,t,n){},fef6:function(e,t,n){}});
//# sourceMappingURL=app.baa279f7.js.map